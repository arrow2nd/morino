const detectSSR=()=>{const t=typeof Deno!="undefined",e=typeof window!="undefined";return typeof _nano!="undefined"&&_nano.isSSR||t||!e};function isDescendant(t,e){return!!t&&(t===e||isDescendant(t.parentNode,e))}const onNodeRemove=(t,e)=>{let n=new MutationObserver(s=>{s.forEach(r=>{r.removedNodes.forEach(i=>{isDescendant(t,i)&&(e(),n&&(n.disconnect(),n=void 0))})})});return n.observe(document,{childList:!0,subtree:!0}),n},escapeHtml=t=>t&&typeof t=="string"?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):t;class HTMLElementSSR{tagName;isSelfClosing=!1;nodeType=null;_ssr;constructor(e){this.tagName=e;const n=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];this.nodeType=1,n.indexOf(e)>=0?(this._ssr=`<${e} />`,this.isSelfClosing=!0):this._ssr=`<${e}></${e}>`}get outerHTML(){return this.toString()}get innerHTML(){return this.innerText}set innerHTML(e){this.innerText=e}get innerText(){return/(^<[^>]+>)(.+)?(<\/[a-z]+>$|\/>$)/gm.exec(this._ssr)?.[2]||""}set innerText(e){const n=/(^<[^>]+>)(.+)?(<\/[a-z]+>$|\/>$)/gm;this._ssr=this._ssr.replace(n,`$1${e}$3`)}getAttribute(e){return null}get classList(){const e=this._ssr,n=/^<\w+.+(\sclass=")([^"]+)"/gm;return{add:s=>{this.setAttribute("class",s)},entries:{get length(){const s=n.exec(e);return s&&s[2]?s[2].split(" ").length:0}}}}toString(){return this._ssr}setAttributeNS(e,n,s){this.setAttribute(n,s)}setAttribute(e,n){this.isSelfClosing?this._ssr=this._ssr.replace(/(^<[a-z]+ )(.+)/gm,`$1${escapeHtml(e)}="${escapeHtml(n)}" $2`):this._ssr=this._ssr.replace(/(^<[^>]+)(.+)/gm,`$1 ${escapeHtml(e)}="${escapeHtml(n)}"$2`)}append(e){this.appendChild(e)}appendChild(e){const n=this._ssr.lastIndexOf("</");this._ssr=this._ssr.substring(0,n)+e+this._ssr.substring(n)}get children(){const e=/<([a-z]+)((?!<\/\1).)*<\/\1>/gms,n=[];let s;for(;(s=e.exec(this.innerHTML))!==null;)n.push(s[0].replace(/[\s]+/gm," "));return n}addEventListener(e,n,s){}}class DocumentSSR{body;head;constructor(){this.body=this.createElement("body"),this.head=this.createElement("head")}createElement(e){return new HTMLElementSSR(e)}createElementNS(e,n){return this.createElement(n)}createTextNode(e){return escapeHtml(e)}querySelector(e){}}const documentSSR=()=>new DocumentSSR,isSSR=()=>typeof _nano!="undefined"&&_nano.isSSR===!0,tick=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,removeAllChildNodes=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},strToHash=t=>{let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);e=(e<<5)-e+s,e|=0}return Math.abs(e).toString(32)},appendChildren=(t,e,n=!0)=>{if(!Array.isArray(e)){appendChildren(t,[e],n);return}typeof e=="object"&&(e=Array.prototype.slice.call(e)),e.forEach(s=>{if(Array.isArray(s))appendChildren(t,s,n);else{const r=_render(s);typeof r!="undefined"&&(Array.isArray(r)?appendChildren(t,r,n):isSSR()&&!n?t.appendChild(r.nodeType==null?r.toString():r):t.appendChild(r.nodeType==null?document.createTextNode(r.toString()):r))}})},SVG=t=>{const e=t.children[0],n=e.attributes;if(isSSR())return e;const s=hNS("svg");for(let r=n.length-1;r>=0;r--)s.setAttribute(n[r].name,n[r].value);return s.innerHTML=e.innerHTML,s},hydrate=(t,e=null,n=!0)=>render(t,e,n),render=(t,e=null,n=!0)=>{let s=_render(t);return Array.isArray(s)&&(s=s.map(r=>_render(r)),s.length===1&&(s=s[0])),e?(n&&removeAllChildNodes(e),s&&e.id&&e.id===s.id&&e.parentElement?e.parentElement.replaceChild(s,e):Array.isArray(s)?s.forEach(r=>{appendChildren(e,_render(r))}):appendChildren(e,_render(s)),e):isSSR()&&!Array.isArray(s)?[s]:s},_render=t=>{if(typeof t=="undefined")return[];if(t==null)return[];if(t===!1)return[];if(typeof t=="string")return t;if(typeof t=="number")return t.toString();if(t.tagName&&t.tagName.toLowerCase()==="svg")return SVG({children:[t]});if(t.tagName)return t;if(t&&t.component&&t.component.isClass)return renderClassComponent(t);if(t.isClass)return renderClassComponent({component:t,props:{}});if(t.component&&typeof t.component=="function")return renderFunctionalComponent(t);if(Array.isArray(t))return t.map(e=>_render(e)).flat();if(typeof t=="function"&&!t.isClass)return _render(t());if(t.component&&t.component.tagName&&typeof t.component.tagName=="string"||Array.isArray(t.component)||t.component)return _render(t.component);if(typeof t=="object")return[];console.warn("Something unexpected happened with:",t)},renderFunctionalComponent=t=>{const{component:e,props:n}=t;return _render(e(n))},renderClassComponent=t=>{const{component:e,props:n}=t,s=strToHash(e.toString());e.prototype._getHash=()=>s;const r=new e(n);isSSR()||r.willMount();let i=r.render();return i=_render(i),r.elements=i,n&&n.ref&&n.ref(r),isSSR()||tick(()=>{r._didMount()}),i},hNS=t=>document.createElementNS("http://www.w3.org/2000/svg",t),h=(t,e,...n)=>{if(isSSR()&&typeof t=="string"&&t.includes("-")&&_nano.customElements.has(t)){const o=_nano.customElements.get(t),u=_render({component:o,props:{...e,children:n}}).toString().match(/^<(?<tag>[a-z]+)>(.*)<\/\k<tag>>$/);if(u){let f=function(m,g,_,p){return m.replace(g,"")};var c=f;const d=new HTMLElementSSR(u[1]);return d.innerText=u[2],d.innerText=d.innerText.replace(/<\w+[^>]*(\s(on\w*)="[^"]*")/gm,f),d}else return"COULD NOT RENDER WEB-COMPONENT"}if(typeof t!="string")return{component:t,props:{...e,children:n}};let s;const r=t==="svg"?hNS("svg"):document.createElement(t),i=(o,l)=>l.indexOf("on")!==0?!1:o.ssr?!0:typeof o[l]=="object"||typeof o[l]=="function";for(const o in e){if(o==="style"&&typeof e[o]=="object"){const l=Object.keys(e[o]).map(u=>`${u}:${e[o][u]}`).join(";").replace(/[A-Z]/g,u=>`-${u.toLowerCase()}`);e[o]=`${l};`}if(o==="ref")s=e[o];else if(i(r,o.toLowerCase()))r.addEventListener(o.toLowerCase().substring(2),l=>e[o](l));else if(o==="dangerouslySetInnerHTML"&&e[o].__html)if(isSSR())r.innerHTML=e[o].__html;else{const l=document.createElement("fragment");l.innerHTML=e[o].__html,r.appendChild(l)}else if(o==="innerHTML"&&e[o].__dangerousHtml)if(isSSR())r.innerHTML=e[o].__dangerousHtml;else{const l=document.createElement("fragment");l.innerHTML=e[o].__dangerousHtml,r.appendChild(l)}else/className/i.test(o)?console.warn('You can use "class" instead of "className".'):typeof e[o]!="undefined"&&r.setAttribute(o,e[o])}const a=!["noscript","script","style"].includes(t);return appendChildren(r,n,a),s&&s(r),r},_state=new Map,initGlobalVar=()=>{const t=detectSSR()===!0?!0:void 0,e={pathname:"/"},n=t?documentSSR():window.document;globalThis._nano={isSSR:t,location:e,document:n,customElements:new Map}};initGlobalVar();class Component{props;id;_elements=[];_skipUnmount=!1;_hasUnmounted=!1;constructor(e){this.props=e||{},this.id=this._getHash()}static get isClass(){return!0}get isClass(){return!0}setState(e,n=!1){typeof e=="object"&&e!==null&&this.state!==void 0?this.state={...this.state,...e}:this.state=e,n&&this.update()}set state(e){_state.set(this.id,e)}get state(){return _state.get(this.id)}set initState(e){this.state===void 0&&(this.state=e)}get elements(){return this._elements||[]}set elements(e){Array.isArray(e)||(e=[e]),e.forEach(n=>{this._elements.push(n)})}_addNodeRemoveListener(){/^[^{]+{\s+}$/gm.test(this.didUnmount.toString())||onNodeRemove(this.elements[0],()=>{this._skipUnmount||this._didUnmount()})}_didMount(){this._addNodeRemoveListener(),this.didMount()}_willUpdate(){this.willUpdate()}_didUpdate(){this.didUpdate()}_didUnmount(){this._hasUnmounted||(this.didUnmount(),this._hasUnmounted=!0)}willMount(){}didMount(){}willUpdate(){}didUpdate(){}didUnmount(){}render(e){}update(e){this._skipUnmount=!0,this._willUpdate();const n=[...this.elements];this._elements=[];let s=this.render(e);s=_render(s),this.elements=s;const r=n[0].parentElement;r||console.warn("Component needs a parent element to get updated!"),this.elements.forEach(i=>{r&&r.insertBefore(i,n[0])}),n.forEach(i=>{i.remove(),i=null}),this._addNodeRemoveListener(),tick(()=>{this._skipUnmount=!1,this.elements[0].isConnected?this._didUpdate():this._didUnmount()})}_getHash(){}}const MODE_SLASH=0,MODE_TEXT=1,MODE_WHITESPACE=2,MODE_TAGNAME=3,MODE_COMMENT=4,MODE_PROP_SET=5,MODE_PROP_APPEND=6,CHILD_APPEND=0,evaluate=(t,e,n,s)=>{let r;e[0]=0;for(let i=1;i<e.length;i++){const a=e[i++],c=e[i]?(e[0]|=a?1:2,n[e[i++]]):e[++i];a===3?s[0]=c:a===4?s[1]=Object.assign(s[1]||{},c):a===5?(s[1]=s[1]||{})[e[++i]]=c:a===6?s[1][e[++i]]+=`${c}`:a?(r=t.apply(c,evaluate(t,c,n,["",null])),s.push(r),c[0]?e[0]|=2:(e[i-2]=CHILD_APPEND,e[i]=r)):s.push(c)}return s},build=function(t,...e){let n=1,s="",r="",i=[0],a,c;const o=l=>{n===1&&(l||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(0,l,s):n===3&&(l||s)?(i.push(3,l,s),n=MODE_WHITESPACE):n===2&&s==="..."&&l?i.push(4,l,0):n===2&&s&&!l?i.push(5,0,!0,s):n>=5&&((s||!l&&n===5)&&(i.push(n,0,s,c),n=MODE_PROP_APPEND),l&&(i.push(n,l,0,c),n=MODE_PROP_APPEND)),s=""};for(let l=0;l<t.length;l++){l&&(n===1&&o(),o(l));for(let u=0;u<t[l].length;u++)a=t[l][u],n===1?a==="<"?(o(),i=[i],n=MODE_TAGNAME):s+=a:n===4?s==="--"&&a===">"?(n=MODE_TEXT,s=""):s=a+s[0]:r?a===r?r="":s+=a:a==='"'||a==="'"?r=a:a===">"?(o(),n=MODE_TEXT):n&&(a==="="?(n=MODE_PROP_SET,c=s,s=""):a==="/"&&(n<5||t[l][u+1]===">")?(o(),n===3&&(i=i[0]),n=i,(i=i[0]).push(2,0,n),n=MODE_SLASH):a===" "||a==="	"||a===`
`||a==="\r"?(o(),n=MODE_WHITESPACE):s+=a),n===3&&s==="!--"&&(n=MODE_COMMENT,i=i[0])}return o(),i},CACHES=new Map,regular=function(t){let e=CACHES.get(this);return e||(e=new Map,CACHES.set(this,e)),e=evaluate(this,e.get(t)||(e.set(t,e=build(t)),e),arguments,[]),e.length>1?e:e[0]},__default=regular;__default.bind(h);const Button=({url:t,second:e})=>{const n=e>0?`\u675C\u91CE\u51DB\u4E16\u3055\u3093\u306E\u304A\u8A95\u751F\u65E5\u307E\u3067\u6B8B\u308A ${e} \u79D2\u3067\u3059\uFF01`:"\u675C\u91CE\u51DB\u4E16\u3055\u3093\u306F\u672C\u65E5\u304C\u304A\u8A95\u751F\u65E5\u3067\u3059\uFF01\uFF01\uFF01\uFF01\uFF01\u{1F389}\u{1F389}",s=encodeURIComponent(`${n}
${t}`);return h("a",{class:"tweet-btn",href:`https://twitter.com/intent/tweet?text=${s}`},"\u30C4\u30A4\u30FC\u30C8")},birth={mon:10-1,day:19};function convJstDate(t){const e=9*60;return new Date(t+(new Date().getTimezoneOffset()+e)*60*1e3)}function getNowJstDate(){return convJstDate(Date.now())}function calcSecond2Birthday(t){const{mon:e,day:n}=birth;let s=t.getFullYear();(t.getMonth()>e||t.getMonth()===e&&t.getDate()>=n+1)&&(s+=1);const r=new Date(s,e,n,0,0,0);return Math.floor((r.getTime()-t.getTime())/1e3)}class CountDown extends Component{siteUrl="";nowDate=getNowJstDate();intervalId=0;second=0;constructor(e){super(e);e.siteUrl&&(this.siteUrl=e.siteUrl)}updateTime=()=>{const e=getNowJstDate();e.getDate()!==this.nowDate.getDate()&&location.reload(),!(e.getMonth()===birth.mon&&e.getDate()===birth.day)&&(this.second=calcSecond2Birthday(e),this.nowDate=e,this.update())};didMount(){this.intervalId=setInterval(this.updateTime,1e3),this.updateTime()}didUnmount(){clearInterval(this.intervalId)}render(){const e=`${this.siteUrl}&t=${this.nowDate.getTime()}`;return h("div",{class:"countdown"},h("h1",{class:"title"},"\u675C\u91CE\u51DB\u4E16\u3055\u3093\u306E\u304A\u8A95\u751F\u65E5\u307E\u3067"),h("div",{class:"time"},"\u6B8B\u308A",h("span",{class:"seconds"},this.second),"\u79D2"),h(Button,{url:e,second:this.second}))}}const start=()=>{hydrate(h(CountDown,null),document.getElementById("content"))};self.addEventListener("load",()=>{start()});
